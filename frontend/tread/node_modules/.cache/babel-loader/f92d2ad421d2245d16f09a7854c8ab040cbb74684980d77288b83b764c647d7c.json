{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\rebek\\\\Documents\\\\Stuff I want to Keep\\\\Coding\\\\Tread-Frontend\\\\frontend\\\\tread\\\\src\\\\pages\\\\login.js\";\nimport React from 'react';\nimport axios from 'axios';\nimport '../css/login.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = () => {\n  // needs variable for nonce\n\n  function handleCredentialResponse(token) {\n    // Check that recieved nonce is correct\n    // Send request to backend for nonce reply in result with cnonce:\n    // nonce with timestamp so repeat attacks won't work.\n    // Figure out CSRF attacks (double cookie sending)\n    // Also alot of stuff will have to change for HTTPS.\n\n    console.log(token);\n    console.log(\"Encoded JWT ID token: \" + token.credential);\n    var config = {\n      method: 'post',\n      url: 'http://localhost:5000/auth/login/google',\n      headers: {\n        Authorization: `${token.credential}`,\n        Accept: 'application/json'\n      }\n    };\n    let isNewUser = false;\n    axios(config).then(function (response) {\n      console.log(response.headers);\n      isNewUser = response.data.isNewUser;\n      console.log(response.data.isNewUser);\n      if (isNewUser) {\n        window.location.href = \"./signUpPage\";\n      } else {\n        window.location.href = \"./currentChallengePage\";\n      }\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n  function loadScript(scriptUrl) {\n    const script = document.createElement('script');\n    script.src = scriptUrl;\n    document.body.appendChild(script);\n    return new Promise((res, rej) => {\n      script.onload = function () {\n        res();\n      };\n      script.onerror = function () {\n        rej();\n      };\n    });\n  }\n  function googleSignIn() {\n    if (window.google) {\n      const google = window.google;\n      google.accounts.id.initialize({\n        client_id: \"1076047412250-apdkut808sf29i8ju8k0lt1jp4gh8n8s.apps.googleusercontent.com\",\n        callback: handleCredentialResponse,\n        // Need to set a random nonce\n        nonce: \"\"\n      });\n      google.accounts.id.renderButton(document.getElementById(\"buttonDiv\"), {\n        theme: \"outline\",\n        size: \"large\"\n      } // customization attributes\n      );\n\n      google.accounts.id.prompt(); // also display the One Tap dialog\n    }\n  }\n\n  // google sign in\n  loadScript('https://accounts.google.com/gsi/client').then(() => {\n    googleSignIn();\n  }).catch(() => {\n    console.error('Script loading failed! Handle this error');\n  });\n\n  // log out function to log the user out of google and set the profile array to null\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"loginPage\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loginSide\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loginBox\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loginBoxItem\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            id: \"treadLogo\",\n            src: \"https://i.imgur.com/cHe0EGL.png\",\n            alt: \"logo\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 43\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loginBoxItem\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            id: \"loginText\",\n            children: \"Log in\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 43\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"loginBoxItem\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            id: \"buttonDiv\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"backgroundSide\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"titleBox\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"TreadTitleDiv\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            id: \"TreadTitle\",\n            src: \"https://i.imgur.com/U7OO0JG.png\",\n            alt: \"Tread\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 37\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"TreadSubtitleDiv\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            id: \"TreadSubtitle\",\n            src: \"https://i.imgur.com/Mx4rK6l.png\",\n            alt: \"Stay Fit with Friends\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 40\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          id: \"weightLiftPhoto\",\n          src: \"https://i.imgur.com/ifnDau9.png\",\n          alt: \"Weightlifting\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 14\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n};\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","axios","Login","handleCredentialResponse","token","console","log","credential","config","method","url","headers","Authorization","Accept","isNewUser","then","response","data","window","location","href","catch","error","loadScript","scriptUrl","script","document","createElement","src","body","appendChild","Promise","res","rej","onload","onerror","googleSignIn","google","accounts","id","initialize","client_id","callback","nonce","renderButton","getElementById","theme","size","prompt"],"sources":["C:/Users/rebek/Documents/Stuff I want to Keep/Coding/Tread-Frontend/frontend/tread/src/pages/login.js"],"sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport '../css/login.css';\r\n\r\nconst Login = () => {\r\n  // needs variable for nonce\r\n\r\n  function handleCredentialResponse(token) {\r\n    // Check that recieved nonce is correct\r\n    // Send request to backend for nonce reply in result with cnonce:\r\n    // nonce with timestamp so repeat attacks won't work.\r\n    // Figure out CSRF attacks (double cookie sending)\r\n    // Also alot of stuff will have to change for HTTPS.\r\n\r\n    console.log(token)\r\n    console.log(\"Encoded JWT ID token: \" + token.credential);\r\n    var config = {\r\n      method: 'post',\r\n      url: 'http://localhost:5000/auth/login/google',\r\n      headers: {\r\n        Authorization: `${token.credential}`,\r\n        Accept: 'application/json'\r\n      }\r\n    };\r\n    let isNewUser = false;\r\n    axios(config)\r\n    .then(function (response) {\r\n      console.log(response.headers);\r\n      isNewUser = response.data.isNewUser;\r\n      console.log(response.data.isNewUser);\r\n      if (isNewUser){\r\n        window.location.href = \"./signUpPage\";\r\n      }\r\n      else{\r\n        window.location.href = \"./currentChallengePage\";\r\n      }\r\n    })\r\n    .catch(function (error) {\r\n      console.log(error);\r\n    });\r\n\r\n  }\r\n\r\n  function loadScript(scriptUrl) {\r\n    const script = document.createElement('script');\r\n    script.src = scriptUrl;\r\n    document.body.appendChild(script);\r\n\r\n    return new Promise((res, rej) => {\r\n      script.onload = function() {\r\n        res();\r\n      }\r\n      script.onerror = function () {\r\n        rej();\r\n      }\r\n    });\r\n  }\r\n\r\n  function googleSignIn() {\r\n    if (window.google) {\r\n      const google = window.google;\r\n      google.accounts.id.initialize({\r\n        client_id: \"1076047412250-apdkut808sf29i8ju8k0lt1jp4gh8n8s.apps.googleusercontent.com\",\r\n        callback: handleCredentialResponse,\r\n        // Need to set a random nonce\r\n        nonce: \"\"\r\n      });\r\n      google.accounts.id.renderButton(\r\n        document.getElementById(\"buttonDiv\"),\r\n        { theme: \"outline\", size: \"large\" }  // customization attributes\r\n      );\r\n      google.accounts.id.prompt(); // also display the One Tap dialog\r\n    }\r\n  }\r\n\r\n  // google sign in\r\n  loadScript('https://accounts.google.com/gsi/client')\r\n    .then(() => {\r\n      googleSignIn();\r\n    })\r\n    .catch(() => {\r\n      console.error('Script loading failed! Handle this error');\r\n    });\r\n\r\n\r\n  // log out function to log the user out of google and set the profile array to null\r\n\r\n\r\n  return (\r\n\r\n    <div className = \"loginPage\">\r\n      <div className = \"loginSide\">\r\n        <div className = \"loginBox\">\r\n          <div className = \"loginBoxItem\"><img id = \"treadLogo\" src = \"https://i.imgur.com/cHe0EGL.png\" alt = \"logo\"/></div>\r\n          <div className = \"loginBoxItem\"><p  id = \"loginText\">Log in</p></div>\r\n          <div className = \"loginBoxItem\">\r\n            <div id=\"buttonDiv\"></div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className = \"backgroundSide\">\r\n        <div className = \"titleBox\">\r\n          <div id = \"TreadTitleDiv\"><img id = \"TreadTitle\" src = \"https://i.imgur.com/U7OO0JG.png\" alt = \"Tread\"/></div>\r\n          <div id = \"TreadSubtitleDiv\"><img id = \"TreadSubtitle\" src = \"https://i.imgur.com/Mx4rK6l.png\" alt = \"Stay Fit with Friends\"/></div>\r\n        </div>\r\n        <div><img  id = \"weightLiftPhoto\" src= \"https://i.imgur.com/ifnDau9.png\" alt = \"Weightlifting\"/></div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}